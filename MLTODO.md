# ML TODO

## 完成情况
- [x] PIT 周度快照脚本/任务入口与数据页触发已就绪，支持生成快照与质量摘要
- [x] 交易日历与调仓规则固化：以 SPY 交易日历为准、周一开盘调仓、快照取上一个交易日收盘；明确时区与交易时段
- [x] 股票生命周期与映射基础落地：接入 symbol_map，支持别名/改名映射并应用到回测与 PIT 快照过滤
- [x] 价格数据质量扫描/修复脚本落地：覆盖缺失/重复/异常收益检测，可选修复输出
- [x] 公司行为口径固化：回测默认使用复权价（adjusted_only），Lean 回测读取 price_source_policy 并在 UI 标注口径
- [x] Universe 规则落地：低价/流动性/停牌过滤 + 每次调仓集合记录
- [x] PIT 财务/因子接入：训练/推理支持周度快照，覆盖阈值与缺失策略可配
- [x] 特征与标签对齐：特征截止至快照日收盘，标签从下一交易日开盘起算
- [x] 周度信号/权重生成：支持 ML 分数与主题权重，输出 signals/weights 快照
- [x] 回测执行细则：仓位限制、换手约束、交易日/时段限制已落地

## 待办清单（按顺序执行）
1. ~~结果产出与审计：保存每次回测的快照、参数、权重、日志与报告，保证可复现~~（已完成）
2. 验证与回归：小样本 sanity check → 全量回测 → 基准/无因子策略对比；检查泄露与幸存者偏差
3. 自动化流程：周期性刷新 PIT 快照 → 触发周度回测 → 状态与告警
